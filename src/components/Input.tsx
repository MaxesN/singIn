import { ChangeEvent, FC } from "react"

type Props = {
    type: string
    placeholder: string
    isValid: boolean
    isVisible?: boolean
    value: string 
    onChangeValue: (e: ChangeEvent<HTMLInputElement>) => void
    onChangeVisible?: () => void
  }

export const Input: FC<Props> = ({type, onChangeValue, placeholder, isValid, value, onChangeVisible, isVisible}) => {
  return(
    <>
      <div className={ isValid ? "tw3-relative tw3-mb-6" : "tw3-relative"}>
        <div className="tw3-flex">
          {type === 'tel' ? <div className="tw3-p-3 tw3-text-sm tw3-bg-[#E2E8F0] tw3-rounded-l-md tw3-border-y-2 tw3-border-l-2">+370</div> : null}
          <input 
            autoComplete={type ==="password" ? 'on' : 'off'}
            className={ `
           placeholder:tw3-text-sm focus:tw3-outline-none tw3-border-2 tw3-duration-200   tw3-w-full tw3-py-2  tw3-pl-4 tw3-pr-12
           ${type === 'tel' ? ' tw3-rounded-r-md' : 'tw3-rounded-md'}
             ${isValid    ? 'focus:tw3-border-[#0EA5E9]'  : 'focus:tw3-border-[#EF4444]'}` }
            type={type === 'password' ?  isVisible ? 'text' : 'password' : type}
            placeholder={placeholder}
            value={value}
            onChange={onChangeValue}
          />
        </div>
        <div onClick={onChangeVisible} className="tw3-cursor-pointer tw3-select-none tw3-top-1/4 tw3-right-4 tw3-absolute">
          {type === 'password' && value.length > 1 ? isVisible
            ? <svg width="30" height="24" viewBox="0 0 30 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M29.7141 22.6594C30.0422 22.9172 30.0937 23.3484 29.8406 23.7141C29.5828 24.0422 29.1094 24.0937 28.7859 23.8406L0.285278 1.33875C-0.0398139 1.08187 -0.0952998 0.61031 0.161388 0.285278C0.418028 -0.0398139 0.889685 -0.0952998 1.21453 0.161388L29.7141 22.6594ZM28.3828 12.5766C27.9047 13.7297 27.0562 15.2484 25.8562 16.7484L24.6797 15.8203C25.7859 14.3953 26.5687 13.0359 27 12C26.3766 10.4578 25.0266 8.20781 23.0062 6.375C20.9859 4.49953 18.3 3 15 3C13.1344 3 11.4656 3.47859 10.0031 4.23328L8.72343 3.22406C10.5 2.19375 12.6 1.45781 15 1.45781C18.7875 1.45781 21.8203 3.22687 24.0281 5.27812C26.2219 7.3125 27.6891 9.70781 28.3828 11.4234C28.5375 11.7937 28.5375 12.2062 28.3828 12.5766ZM4.14328 7.25156L5.32031 8.17968C4.21218 9.5625 3.43265 10.9641 2.95781 11.9578C3.62484 13.5 4.97343 15.75 6.99375 17.625C9.01406 19.5 11.7 21 14.9578 21C16.8656 21 18.5344 20.5219 19.9969 19.7672L21.2766 20.775C19.4578 21.8062 17.4 22.5 14.9578 22.5C11.2125 22.5 8.17968 20.775 5.97187 18.7219C3.77906 16.6453 2.31281 14.25 1.61531 12.5766C1.46156 12.2062 1.46156 11.7937 1.61531 11.4234C2.09672 10.2703 2.94375 8.75156 4.14328 7.25156ZM8.95781 11.9578C8.95781 11.7047 9.02343 11.4187 9.06094 11.1328L10.5094 12.2766C10.65 14.6344 12.5672 16.5 14.9578 16.5C15.2625 16.5 15.525 16.4766 15.7734 16.4344L17.2219 17.5734C16.5328 17.85 15.7828 18 14.9578 18C11.6859 18 8.95781 15.3141 8.95781 11.9578ZM21 11.9578C21 12.2953 20.9766 12.5812 20.9391 12.8672L19.4906 11.7234C19.35 9.36562 17.3906 7.45781 14.9578 7.45781C14.7375 7.45781 14.475 7.52343 14.2266 7.56562L12.7781 6.42656C13.4672 6.15 14.2172 5.95781 14.9578 5.95781C18.3141 5.95781 21 8.68594 21 11.9578Z" fill="#CBD5E1"/>
            </svg> 
            :  <svg width="27" height="22" viewBox="0 0 27 22" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19.5 11C19.5 14.3141 16.8141 17 13.5 17C10.1859 17 7.5 14.3141 7.5 11C7.5 7.68594 10.1859 5 13.5 5C16.8141 5 19.5 7.68594 19.5 11ZM13.5 6.5C10.9734 6.5 9 8.47344 9 11C9 13.4844 10.9734 15.5 13.5 15.5C15.9844 15.5 18 13.4844 18 11C18 8.47344 15.9844 6.5 13.5 6.5ZM22.5281 4.27812C24.7219 6.3125 26.1891 8.70781 26.8828 10.4234C27.0375 10.7937 27.0375 11.2062 26.8828 11.5766C26.1891 13.25 24.7219 15.6453 22.5281 17.7219C20.3203 19.775 17.2875 21.5 13.5 21.5C9.7125 21.5 6.67969 19.775 4.47282 17.7219C2.27907 15.6453 0.812818 13.25 0.115365 11.5766C-0.0384551 11.2062 -0.0384551 10.7937 0.115365 10.4234C0.812818 8.70781 2.27907 6.3125 4.47282 4.27812C6.67969 2.22688 9.7125 0.5 13.5 0.5C17.2875 0.5 20.3203 2.22688 22.5281 4.27812ZM1.50001 11C2.12485 12.5 3.47485 14.75 5.49375 16.625C7.51407 18.5 10.2 20 13.5 20C16.8 20 19.4859 18.5 21.5063 16.625C23.5266 14.75 24.8766 12.5 25.5 11C24.8766 9.45781 23.5266 7.20781 21.5063 5.375C19.4859 3.49953 16.8 2 13.5 2C10.2 2 7.51407 3.49953 5.49375 5.375C3.47485 7.20781 2.12485 9.45781 1.50001 11Z" fill="#CBD5E1"/>
            </svg>
            : null
          }
        </div>
      </div>
      { !isValid && <div className="tw3-text-left tw3-text-[#EF4444]">{type === 'text' ? "Nurodytas neteisingas prisijungimas" : 'Nurodytas neteisingas slapta≈æodis'}</div>}
    </>
      
  )
}